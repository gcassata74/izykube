<form [formGroup]="form" class="deployment-form">
  <div class="form-group">
    <label for="name">Name</label>
    <input id="name" type="text" formControlName="name" class="form-control">
  </div>
  <div class="form-group">
    <label for="replicas">Replicas</label>
    <input id="replicas" type="number" formControlName="replicas" class="form-control">
  </div>
  <div class="form-group">
    <label for="assetId">Asset</label>
    <p-dropdown #assets *ngIf="filteredAssets$ | async as filteredAssets"
                [options]="filteredAssets"
                formControlName="assetId"
                optionValue="id"
                optionLabel="label"
                (onChange)="emitChange($event)"
                placeholder="Select an Asset">
    </p-dropdown>
  </div>
  <div class="form-group">
    <label for="containerPort">Container Port</label>
    <input id="containerPort" type="number" formControlName="containerPort" class="form-control">
  </div>
  <div formGroupName="resources">
    <h3>Resources</h3>
    <div class="form-group">
      <label for="cpu">CPU</label>
      <input id="cpu" type="text" formControlName="cpu" class="form-control">
    </div>
    <div class="form-group">
      <label for="memory">Memory</label>
      <input id="memory" type="text" formControlName="memory" class="form-control">
    </div>
  </div>
  <div formArrayName="envVars">
    <h3>Environment Variables</h3>
    <button type="button" (click)="addEnvVar()">Add Environment Variable</button>
    <div *ngFor="let envVar of envVars.controls; let i=index" [formGroupName]="i">
      <input type="text" formControlName="name" placeholder="Name">
      <input type="text" formControlName="value" placeholder="Value">
      <button type="button" (click)="removeEnvVar(i)">Remove</button>
    </div>
  </div>
</form>
